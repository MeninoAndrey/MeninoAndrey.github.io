<!doctype html>
<html lang="pt-br">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Contagem regressiva</title>
<style>
  :root { --bg:#0b132b; --card:#1c2541; --acc:#5bc0be; --txt:#e0e0e0; --dim:#9aa4b2; }
  html,body { height:100%; margin:0; }
  body {
    background: radial-gradient(1000px 600px at 50% -20%, #162447 0%, #0b132b 60%);
    color: var(--txt); font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    display:flex; align-items:center; justify-content:center;
  }
  .wrap {
    text-align:center; padding:28px; background:linear-gradient(180deg, var(--card), #111927);
    border-radius:20px; box-shadow: 0 10px 30px rgba(0,0,0,.35); max-width: 720px; width: min(92vw, 720px);
    border:1px solid rgba(255,255,255,.06);
  }
  h1 { margin: 0 0 14px; font-weight:700; letter-spacing:.3px; }
  p  { margin: 0 0 22px; color: var(--dim); }
  .grid { display:grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-top: 6px; }
  .box { background:#0f1a2e; border:1px solid rgba(255,255,255,.06); border-radius:16px; padding:18px 10px; }
  .num { font-size: clamp(32px, 7vw, 56px); font-weight:800; line-height:1; }
  .lab { margin-top:6px; font-size:13px; letter-spacing:.25px; color: var(--acc); text-transform:uppercase; }
  .foot { margin-top: 18px; font-size: 13px; color: var(--dim); }
  .ok { color:#6ee7a8; }
  .warn { color:#fca5a5; }
  .bar { margin-top: 18px; display:flex; gap:8px; justify-content:center; flex-wrap:wrap; }
  input[type="text"]{ width:min(70vw,460px); padding:8px 10px; border-radius:10px; border:1px solid rgba(255,255,255,.1); background:#0f1a2e; color:#e0e0e0; }
  button{ padding:8px 14px; border-radius:10px; border:1px solid rgba(255,255,255,.1); background:#19243a; color:#e0e0e0; cursor:pointer; }
  button:hover{ filter:brightness(1.1); }
</style>
</head>
<body>
  <div class="wrap">
    <h1 id="title">Contagem regressiva</h1>
    <p id="dest">Destino: <strong id="destVal">â€”</strong></p>
    <div id="status" class="foot">Calculandoâ€¦</div>

    <div class="grid" role="timer" aria-live="polite" aria-label="Contagem regressiva">
      <div class="box"><div id="d" class="num">--</div><div class="lab">dias</div></div>
      <div class="box"><div id="h" class="num">--</div><div class="lab">horas</div></div>
      <div class="box"><div id="m" class="num">--</div><div class="lab">min</div></div>
      <div class="box"><div id="s" class="num">--</div><div class="lab">seg</div></div>
    </div>

    <div class="bar">
      <input id="link" type="text" readonly value="">
      <button id="copy">Copiar link</button>
    </div>

    <div class="foot" id="foot"></div>
  </div>

<script>
(function(){
  const qs = new URLSearchParams(location.search);
  const targetStr = qs.get("t") || "2025-11-07T06:00:00-03:00";
  const titleStr  = qs.get("title") || "Contagem regressiva";
  const labelStr  = qs.get("label") || "Destino";

  const target = new Date(targetStr);
  const elD = document.getElementById('d');
  const elH = document.getElementById('h');
  const elM = document.getElementById('m');
  const elS = document.getElementById('s');
  const status = document.getElementById('status');
  const foot = document.getElementById('foot');
  const h1 = document.getElementById('title');
  const dest = document.getElementById('dest');
  const destVal = document.getElementById('destVal');

  h1.textContent = titleStr;
  dest.firstChild.textContent = labelStr + ": ";
  destVal.textContent = targetStr;

  function fmt(n){ return String(n).padStart(2,'0'); }

  function tick(){
    const now = new Date();
    if (isNaN(target.getTime())){
      status.innerHTML = '<span class="warn">Data alvo invÃ¡lida. Use ISO como 2025-11-07T06:00:00-03:00</span>';
      return;
    }
    let diff = target.getTime() - now.getTime();
    if (diff <= 0){
      elD.textContent = '00'; elH.textContent = '00';
      elM.textContent = '00'; elS.textContent = '00';
      status.innerHTML = '<span class="ok">Chegou o momento! ðŸŽ‰</span>';
      foot.textContent = '';
      return;
    }
    const sec = Math.floor(diff / 1000);
    const d = Math.floor(sec / 86400);
    const h = Math.floor((sec % 86400) / 3600);
    const m = Math.floor((sec % 3600) / 60);
    const s = sec % 60;

    elD.textContent = fmt(d);
    elH.textContent = fmt(h);
    elM.textContent = fmt(m);
    elS.textContent = fmt(s);

    const opts = {year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit',second:'2-digit'};
    status.textContent = 'Agora: ' + new Date().toLocaleString(undefined, opts);
    foot.textContent = 'Destino (no seu fuso): ' + target.toLocaleString(undefined, opts);
    requestAnimationFrame(() => setTimeout(tick, 250));
  }
  tick();

  const base = location.href.split('?')[0];
  const share = base + '?t=' + encodeURIComponent(targetStr)
                        + '&title=' + encodeURIComponent(titleStr)
                        + '&label=' + encodeURIComponent(labelStr);
  const link = document.getElementById('link');
  link.value = share;

  document.getElementById('copy').addEventListener('click', () => {
    link.select(); link.setSelectionRange(0, 99999);
    document.execCommand('copy');
    document.getElementById('copy').textContent = 'Copiado!';
    setTimeout(()=>{ document.getElementById('copy').textContent='Copiar link'; }, 1500);
  });
})();
</script>
</body>
</html>
